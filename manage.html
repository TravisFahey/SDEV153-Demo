<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Create event — Gaming Events</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="site.css">
  <style>
    .page-card{ max-width: 720px; }
  </style>
</head>
<body class="d-flex flex-column min-vh-100">
  <header>
    <nav class="navbar navbar-expand-sm navbar-light bg-white shadow-sm" aria-label="Primary">
      <div class="container">
        <a class="navbar-brand" href="/" aria-label="Gaming Events — Home">
          <i class="fa-solid fa-gamepad" aria-hidden="true"></i>
          <span class="brand-text">Gaming Events</span>
        </a>

        <button class="navbar-toggler" type="button"
                data-bs-toggle="collapse"
                data-bs-target="#mainNav"
                aria-controls="mainNav"
                aria-expanded="false"
                aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" href="index.html" aria-current="page">Home</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
            <li class="nav-item"><a class="nav-link" href="manage.html">Manage</a></li>
            <li class="nav-item"><a class="nav-link" href="login.html">Account</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main id="main" class="flex-grow-1 py-4" role="main">
    <div class="container d-flex justify-content-center">
      <div class="card page-card shadow-sm w-100">
        <div class="card-body p-4 p-md-5">
          <h1 class="h3 mb-3">Create event</h1>
          <p class="text-muted">Only the essentials. Fields marked with * are required.</p>

          <div id="form-status" role="status" aria-live="polite" class="mb-3"></div>

          <form id="eventForm" novalidate>
            <div class="mb-3">
              <label for="title" class="form-label required">Title</label>
              <input type="text" id="title" name="title" class="form-control" required maxlength="120" aria-describedby="title-error">
              <div id="title-error" class="field-error" role="alert"></div>
            </div>

            <div class="row g-3">
              <div class="col-12 col-md-4">
                <label for="date" class="form-label required">Date</label>
                <input type="date" id="date" name="date" class="form-control" required aria-describedby="date-error">
                <div id="date-error" class="field-error" role="alert"></div>
              </div>
              <div class="col-6 col-md-4">
                <label for="startTime" class="form-label required">Start time</label>
                <input type="time" id="startTime" name="startTime" class="form-control" required aria-describedby="time-error">
              </div>
              <div class="col-6 col-md-4">
                <label for="endTime" class="form-label required">End time</label>
                <input type="time" id="endTime" name="endTime" class="form-control" required aria-describedby="time-error">
                <div id="time-error" class="field-error" role="alert"></div>
              </div>
            </div>

            <div class="mb-3 mt-3">
              <label for="place" class="form-label required">Location or event link</label>
              <input type="text" id="place" name="place" class="form-control" required aria-describedby="place-hint place-error">
              <div id="place-hint" class="form-text">Example: "Louisville Esports Arena" or "https://twitch.tv/yourchannel"</div>
              <div id="place-error" class="field-error" role="alert"></div>
            </div>

            <div class="mb-3">
              <label for="photo" class="form-label">Photo (optional)</label>
              <input type="file" id="photo" name="photo" class="form-control" />
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Description (optional)</label>
              <textarea id="description" name="description" class="form-control" rows="5" maxlength="1000"></textarea>
            </div>

            <div class="d-flex gap-2 mt-4">
              <button type="submit" class="btn btn-primary">Publish</button>
              <a href="/" class="btn btn-outline-secondary">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <footer class="mt-auto bg-purple text-white border-top-0" role="contentinfo">
    <div class="container py-3 text-center">
      <div class="mb-2">
        <a href="https://twitter.com" target="_blank" rel="noopener"
          class="text-white fs-4 me-3" aria-label="Twitter">
          <i class="fab fa-x-twitter"></i>
        </a>
        <a href="https://facebook.com" target="_blank" rel="noopener"
          class="text-white fs-4 me-3" aria-label="Facebook">
          <i class="fab fa-facebook"></i>
        </a>
        <a href="https://twitch.tv" target="_blank" rel="noopener"
          class="text-white fs-4 me-3" aria-label="Twitch">
          <i class="fab fa-twitch"></i>
        </a>
        <a href="https://youtube.com" target="_blank" rel="noopener"
          class="text-white fs-4" aria-label="YouTube">
          <i class="fab fa-youtube"></i>
        </a>
      </div>
      <div class="small">
        &copy; 2025 - Gaming Events
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    (function(){
      const form = document.getElementById('eventForm');
      const status = document.getElementById('form-status');
      const title = document.getElementById('title');
      const date = document.getElementById('date');
      const start = document.getElementById('startTime');
      const end = document.getElementById('endTime');
      const place = document.getElementById('place');

      function err(input, id, msg){
        const el = document.getElementById(id);
        input.classList.add('is-invalid');
        input.setAttribute('aria-invalid','true');
        if(el) el.textContent = msg;
      }
      function ok(input, id){
        const el = document.getElementById(id);
        input.classList.remove('is-invalid');
        input.removeAttribute('aria-invalid');
        if(el) el.textContent = '';
      }

      function validate(){
        let good = true;
        ok(title,'title-error');
        ok(date,'date-error');
        ok(start,'time-error');
        ok(end,'time-error');
        ok(place,'place-error');

        if(!title.value.trim()){ err(title,'title-error','Title is required.'); good = false; }
        if(!date.value){ err(date,'date-error','Date is required.'); good = false; }
        if(!start.value){ err(start,'time-error','Start time is required.'); good = false; }
        if(!end.value){ err(end,'time-error','End time is required.'); good = false; }
        if(date.value && start.value && end.value){
          const startDT = new Date(date.value+'T'+start.value);
          const endDT = new Date(date.value+'T'+end.value);
          if(endDT <= startDT){ err(end,'time-error','End time must be after start time.'); good = false; }
        }
        if(!place.value.trim()){ err(place,'place-error','Enter a venue name or a URL.'); good = false; }
        return good;
      }

      [title,date,start,end,place].forEach(el=>{
        el.addEventListener('input', ()=>{ status.textContent=''; validate(); });
        el.addEventListener('change', ()=>{ status.textContent=''; validate(); });
      });

      // set today by default
      date.value = new Date().toISOString().slice(0,10);

      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        if(!validate()){
          status.textContent = 'Please fix the errors and try again.';
          return;
        }
        status.textContent = 'Publishing…';
        setTimeout(()=>{
          status.textContent = 'Event created.';
          // window.location.href = '/';
        }, 500);
      });
    })();
  </script>
</body>
</html>